---
import BaseLayout from '../../layouts/BaseLayout.astro';
import AdminLayout from '../../components/admin/AdminLayout.astro';
import { buildApiUrl } from '../../lib/api';

const orders = [
  { id: 'GS-241106-01', symbol: 'AAPL', side: 'Buy', quantity: '5,000', status: 'Filled', venue: 'NASDAQ' },
  { id: 'GS-241106-02', symbol: 'MSFT', side: 'Sell', quantity: '2,500', status: 'Partial', venue: 'NYSE' },
  { id: 'GS-241106-03', symbol: 'SPY', side: 'Buy', quantity: '10,000', status: 'Working', venue: 'ARCA' }
];

const exportOrdersUrl = buildApiUrl('/admin/orders/export');
const apiDocsUrl = buildApiUrl('/docs');
---
<BaseLayout title="Admin | Orders" description="Review orders routed through GoldShore execution.">
  <AdminLayout heading="Orders" description="Surface real-time and historical orders with routing context and quick actions.">
    <div class="space-y-8">
      <div class="rounded-xl border border-border/60 bg-bg p-6 shadow-elev-1">
        <div class="flex flex-wrap items-center justify-between gap-4">
          <div>
            <h2 class="font-display text-xl text-text">Recent activity</h2>
            <p class="text-sm text-muted">Snapshot of the last execution window.</p>
          </div>
          <a class="inline-flex items-center rounded-lg border border-border px-4 py-2 text-sm font-medium text-muted transition hover:text-text focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-border/60" href="/dash">
            Open Trading Dashboard
          </a>
        </div>
        <div class="mt-6 overflow-x-auto">
          <table class="min-w-full divide-y divide-border/60 text-sm">
            <thead class="bg-surface/70 text-xs uppercase tracking-[0.2em] text-muted">
              <tr>
                <th class="px-4 py-3 text-left">Order ID</th>
                <th class="px-4 py-3 text-left">Symbol</th>
                <th class="px-4 py-3 text-left">Side</th>
                <th class="px-4 py-3 text-left">Quantity</th>
                <th class="px-4 py-3 text-left">Status</th>
                <th class="px-4 py-3 text-left">Venue</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-border/60 bg-surface/40 text-sm">
              {orders.map((order) => (
                <tr>
                  <td class="px-4 py-3 font-medium text-text">{order.id}</td>
                  <td class="px-4 py-3 text-muted">{order.symbol}</td>
                  <td class="px-4 py-3 text-muted">{order.side}</td>
                  <td class="px-4 py-3 text-muted">{order.quantity}</td>
                  <td class="px-4 py-3 text-muted">{order.status}</td>
                  <td class="px-4 py-3 text-muted">{order.venue}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>

      <div class="grid gap-4 md:grid-cols-3">
        <div class="rounded-xl border border-border/60 bg-surface/70 p-6 shadow-elev-1">
          <p class="text-xs uppercase tracking-[0.2em] text-muted">Kill switch</p>
          <p class="mt-3 text-sm text-muted">If executions look abnormal, head straight to risk and pause routing.</p>
          <a class="mt-4 inline-flex items-center text-sm font-medium text-brand" href="/admin/risk">Open risk console</a>
        </div>
        <div class="rounded-xl border border-border/60 bg-surface/70 p-6 shadow-elev-1">
          <p class="text-xs uppercase tracking-[0.2em] text-muted">Download fills</p>
          <a class="mt-3 inline-flex items-center rounded-lg bg-[var(--brand)] px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-[var(--brand-contrast)] shadow-elev-1 transition hover:brightness-105 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand/40" href={exportOrdersUrl} rel="noreferrer">
            Export CSV
          </a>
        </div>
        <div class="rounded-xl border border-border/60 bg-surface/70 p-6 shadow-elev-1">
          <p class="text-xs uppercase tracking-[0.2em] text-muted">Docs</p>
          <a class="mt-3 inline-flex items-center text-sm font-medium text-brand" href={apiDocsUrl} rel="noreferrer">
            Order management API
          </a>
        </div>
      </div>
    </div>
  </AdminLayout>
</BaseLayout>
